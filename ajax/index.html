<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title> Ajax </title>
  <!-- <link rel="stylesheet" href="css/login.css" /> -->
</head>

<body>
  <div class="login_wrap">
    <h1>로그인</h1>
    <form class="login_f" method='POST' action='member_login_ok.php'>
      <p>
        <label for="user_id">아이디</label>
        <input type="text" name="user_id" id="user_id" value="user1">
      </p>
      <p>
        <label for="user_pw">비밀번호</label>
        <input type="password" name="user_pw" id="user_pw" value="pw1">
      </p>
      <p><input type="submit" value="로그인" class="login_btn"></p>
    </form>
  </div>
  <script src="js/jquery-3.4.1.js"></script>
  <script>
    $(function () {
      var $frm = $(".login_f");
      $frm.on("submit", function (e) {
        e.preventDefault();
        var myData = $frm.serialize();        
        console.log($frm.attr("action"));
        console.log(myData);
        $.ajax({
          url: $frm.attr("action"),
          dataType:'json',
          type: "POST",
          data: myData,
          success: function (res) {
            console.log(res);
            if (res) {
              var jsonData = JSON.parse(res);
              var message = jsonData.user_name + "( " + jsonData.user_id + " )" + "님 반갑습니다";
              $(".login_wrap").html(message);
            }
          },
          error: function (request, status, error) {
            console.log("code:" + request + "\n" + "msg:" + request.responseText + "\n" + "error" + error);
          }
        });
      });
    });
  </script>
</body>

</html>